{% extends "base.njk" %}

{% block content %}
{% include "hero.njk" %}

<section class="section">
  <div class="section-header">
    <h2 class="section-title">Latest Posts</h2>
    <a href="{{ '/blog/' | url }}" class="section-link">View all →</a>
  </div>
  
  <div class="post-list">
    {% for post in collections.posts | limit(5) %}
    <article class="post-card">
      <h3 class="post-card-title">
        <a href="{{ post.url }}">{{ post.title }}</a>
        {% if post.draft %}<span class="draft-badge">Draft</span>{% endif %}
      </h3>
      <div class="post-card-meta">
        <time datetime="{{ post.date | date('iso') }}">{{ post.date | date('short') }}</time>
        {% if post.tags and post.tags.length %}
        <span class="post-card-tags">
          {% for tag in post.tags | limit(3) %}
          <a href="{{ '/tags/' | url }}{{ tag | slug }}/" class="tag tag-sm">{{ tag }}</a>
          {% endfor %}
        </span>
        {% endif %}
      </div>
      <p class="post-card-excerpt">{{ post.excerpt }}</p>
    </article>
  {% else %}
  <p class="empty-message">No posts yet. Create your first post with <code>npx sia new post "My First Post"</code></p>
  {% endfor %}
  </div>
</section>

{% if collections.notes and collections.notes.length %}
<section class="section">
  <div class="section-header">
    <h2 class="section-title">Recent Notes</h2>
    <a href="{{ '/notes/' | url }}" class="section-link">View all →</a>
  </div>
  
  <div class="notes-grid">
    {% for note in collections.notes | limit(3) %}
    <article class="note-card">
      <div class="note-card-content">{{ note.excerpt }}</div>
      <footer class="note-card-footer">
        <time datetime="{{ note.date | date('iso') }}">{{ note.date | date('full_time') }}</time>
        <a href="{{ note.url }}" class="note-card-link">View →</a>
      </footer>
    </article>
    {% endfor %}
  </div>
</section>
{% endif %}
{% endblock %}

